{"version":3,"sources":["assets/logo.png","components/header/header.jsx","shared/utils/time.js","components/item/item.jsx","components/error/error.jsx","redux/selectors/news-selector.js","shared/utils/utils.js","hooks/use-item-list.js","components/loader/content-loader.jsx","components/item-list/item-list.jsx","components/title/title.jsx","redux/actions/types.js","redux/actions/comments.js","shared/constants.js","shared/requests/item.js","shared/utils/comments.js","hooks/use-comments.js","components/comments/comment-item.jsx","components/comments/comment-list.jsx","components/comments/comments.jsx","redux/actions/single-news.js","redux/selectors/news-item-selector.js","components/single-news-item/single-news-item.jsx","hooks/use-news-item.js","shared/requests/news.js","hooks/use-news.js","redux/actions/news.js","App.js","reportWebVitals.js","redux/reducers/news.js","redux/reducers/news-item.js","redux/reducers/root-reducer.js","redux/store.js","index.js"],"names":["Header","className","to","src","Logo","alt","getNewsPostTime","time","between","Date","now","Number","pluralize","label","Item","item","postTime","score","href","url","target","rel","title","by","id","descendants","Error","newsSelector","createSelector","state","newsReducer","news","sortItemsByDate","itemA","itemB","useItemList","useSelector","loading","isFail","sortedItems","Object","values","slice","sort","ContentLoader","type","color","height","width","ItemList","map","Title","handleRefreshNews","onClick","LOAD_NEWS_START","LOAD_NEWS_SUCCESS","LOAD_NEWS_FAILURE","LOAD_NEWS_ITEM_SUCCESS","LOAD_NEWS_ITEM_FAILURE","LOAD_COMMENTS_SUCCESS","LOAD_COMMENTS_FAILURE","addCommentsSuccess","payload","addCommentsFailure","baseURL","TIME_INTERVAL","getNewsItem","newsId","a","axios","get","response","data","buildCommentTree","comment","commentsById","toString","text","children","kids","kidId","getCommentsByIds","arrayOfKids","kid","Promise","all","kidsPromise","result","res","allKidsIds","forEach","concat","length","console","error","useParams","dispatch","useDispatch","timerRef","useRef","useState","setLoading","newsItemReducer","comments","isCommentsFailed","singleComment","loadCommentsPerMinute","requestComments","current","setTimeout","useEffect","clearTimeout","commentList","handleRefreshComments","commentsCount","postId","filter","parent","buildTree","CommentItem","commentPostTime","kidsShowed","setKidsShowed","dangerouslySetInnerHTML","__html","CommentList","Comments","useComments","addNewsItemSuccess","newsItemSelector","newsItem","SingleNewsItem","newsItems","isItemsFailed","singleItem","requestSignleNews","useNewsItem","getTopNews","newsLimit","newsIds","useNews","loadNewsPerMinute","requestNews","topNewsIds","newsList","topNewsList","App","path","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","action","itemsObject","i","rootReducer","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.64afdea3.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.601fa4f1.png\";","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../../scss/components/header.sass';\r\nimport Logo from '../../assets/logo.png';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"container\">\r\n        <div className=\"row header-row\">\r\n          <div className=\"logo\">\r\n            <Link to=\"/hacker-news-avito/\" className=\"logo-link\">\r\n              <img src={Logo} alt=\"Logo\" className=\"logo-img\" />\r\n              <span className=\"logo-text\"> Hacker News </span>\r\n            </Link>\r\n          </div>\r\n          <nav className=\"menu\"></nav>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","export function getNewsPostTime(time) {\n  const between = Date.now() / 1000 - Number(time);\n  if (between < 3600) {\n    return pluralize(~~(between / 60), ' minute');\n  } else if (between < 86400) {\n    return pluralize(~~(between / 3600), ' hour');\n  } else {\n    return pluralize(~~(between / 86400), ' day');\n  }\n}\n\nfunction pluralize(time, label) {\n  if (time === 1) {\n    return time + label;\n  }\n  return time + label + 's';\n}\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { getNewsPostTime } from '../../shared/utils/time';\r\nimport '../../scss/components/item.sass';\r\nimport '../../scss/components/mobile.scss';\r\n\r\nconst Item = ({ item }) => {\r\n  const postTime = getNewsPostTime(item.time);\r\n\r\n  return (\r\n    <div className=\"news-item\">\r\n      <div className=\"news-item__box-rating\">\r\n        <div className=\"rating up\">{item.score}</div>\r\n        <span>Points</span>\r\n      </div>\r\n      <div className=\"news-item__box-content\">\r\n        <a href={`${item.url}`} target=\"_blank\" rel=\"noreferrer\">\r\n          <h2> {item.title} </h2>\r\n        </a>\r\n        <div className=\"news-item__box-footer\">\r\n          <ul>\r\n            <li>\r\n              <i className=\"icon icon-user\"></i>\r\n              <span> {item.by} </span>\r\n            </li>\r\n            <li>\r\n              <Link to={`/item/${item.id}`}>\r\n                <i className=\"icon icon-comment\"></i>\r\n                <span>\r\n                  {' '}\r\n                  {item.descendants\r\n                    ? `${item.descendants} Comments`\r\n                    : `No comments yet`}{' '}\r\n                </span>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <i className=\"icon icon-time\"></i>\r\n              <span> {postTime} ago</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className=\"news-item__box-action\">\r\n        <a href={`${item.url}`} target=\"_blank\" rel=\"noreferrer\">\r\n          Open link\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../../scss/components/error.sass';\n\nconst Error = () => {\n  return (\n    <div className=\"error\">\n      <div className=\"container\">\n        <h1 className=\"error-title\">\n          <span>404</span> <br /> Ooops! Page not found\n        </h1>\n        <p className=\"error-text\">\n          This page does not exist or it is not unavailable\n        </p>\n        <Link to=\"/\" className=\"error-link\">\n          Go back to main page\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Error;\n","import { createSelector } from 'reselect';\n\nconst selectNewsState = (state) => state.newsReducer;\nexport const newsSelector = createSelector([selectNewsState], (news) => news);\n","export function sortItemsByDate(itemA, itemB){\r\n  if (itemA.time > itemB.time) return -1;\r\n  if (itemA.time < itemB.time) return 1;\r\n  return 0;\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { newsSelector } from '../redux/selectors/news-selector';\r\nimport { sortItemsByDate } from '../shared/utils/utils';\r\n\r\nconst useItemList = () => {\r\n  const { news, loading, isFail } = useSelector(newsSelector);\r\n\r\n  const newsArray = Object.values(news);\r\n  const sortedItems = newsArray.slice().sort(sortItemsByDate);\r\n\r\n  return { sortedItems, loading, isFail };\r\n};\r\n\r\nexport default useItemList;\r\n","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nconst ContentLoader = () => {\r\n  return (\r\n    <div className=\"content-loader\">\r\n      <Loader type=\"Oval\" color=\"#ed702d\" height={40} width={40} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentLoader;\r\n","import React from 'react';\r\nimport Item from '../item/item';\r\nimport Error from '../error/error';\r\nimport useItemList from '../../hooks/use-item-list';\r\nimport ContentLoader from '../loader/content-loader';\r\n\r\nconst ItemList = () => {\r\n  const { sortedItems, loading, isFail } = useItemList();\r\n  return (\r\n    <div className=\"item-list\">\r\n      {loading ? (\r\n        <ContentLoader />\r\n      ) : isFail ? (\r\n        <Error />\r\n      ) : (\r\n        sortedItems.map((item) => <Item key={item.id} item={item} />)\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemList;\r\n","import React from 'react';\nimport '../../scss/components/title.sass';\n\nconst Title = ({ title, handleRefreshNews }) => {\n  return (\n    <div className=\"filter\">\n      <div className=\"filter-label\">\n        <h4>{title}</h4>\n      </div>\n      <div className=\"filter-button\">\n        <button className=\"button\" onClick={handleRefreshNews}>\n          Refresh\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Title;\n","export const LOAD_NEWS_START = 'LOAD_NEWS_START';\nexport const LOAD_NEWS_SUCCESS = 'LOAD_NEWS_SUCCESS';\nexport const LOAD_NEWS_FAILURE = 'LOAD_NEWS_FAILURE';\n\nexport const LOAD_NEWS_ITEM_SUCCESS = 'LOAD_NEWS_ITEM_SUCCESS';\nexport const LOAD_NEWS_ITEM_FAILURE = 'LOAD_NEWS_ITEM_FAILURE';\n\nexport const LOAD_COMMENTS_SUCCESS = 'LOAD_COMMENTS_SUCCESS';\nexport const LOAD_COMMENTS_FAILURE = 'LOAD_COMMENTS_FAILURE';\n","import { LOAD_COMMENTS_FAILURE, LOAD_COMMENTS_SUCCESS } from './types';\n\nexport const addCommentsSuccess = (item) => ({\n  type: LOAD_COMMENTS_SUCCESS,\n  payload: item\n});\n\nexport const addCommentsFailure = () => ({\n  type: LOAD_COMMENTS_FAILURE\n});\n","export const baseURL = 'https://hacker-news.firebaseio.com/v0';\r\nexport const TIME_INTERVAL = 60000;\r\nexport const NEWS_LIMIT = 100;\r\n","import axios from 'axios';\nimport { baseURL } from '../constants';\n\nexport const getNewsItem = async (newsId) => {\n  const response = await axios.get(`${baseURL}/item/${newsId}.json`);\n  return response.data;\n};\n","import { getNewsItem } from '../requests/item';\n\nexport const buildTree = (comments, postId) => {\n  const commentsById = {};\n  comments.forEach((comment) => {\n    commentsById[comment.id] = comment;\n  });\n  const rootComments = comments.filter((comment) => {\n    return comment?.parent?.toString() === postId;\n  });\n  return rootComments.map((item) => buildCommentTree(item, commentsById));\n};\n\nexport const buildCommentTree = (comment, commentsById) => {\n  const result = {\n    id: comment.id.toString(),\n    text: comment.text,\n    by: comment.by,\n    time: comment.time,\n    children: comment.kids?.map((kidId) =>\n      buildCommentTree(commentsById[kidId], commentsById)\n    )\n  };\n  return result;\n};\n\nexport const getCommentsByIds = async (kids) => {\n  const arrayOfKids = kids.map((kid) => getNewsItem(kid));\n  const kidsPromise = await Promise.all(arrayOfKids);\n  const res = await Promise.all(kidsPromise.map((result) => result));\n\n  try {\n    let allKidsIds = [];\n    res.forEach((item) => {\n      allKidsIds = allKidsIds.concat(item?.kids || []);\n    });\n\n    if (!allKidsIds.length) return res;\n    const data = await getCommentsByIds(allKidsIds);\n    return data.concat(res);\n  } catch (err) {\n    console.error(`Что-то пошло не так: `, err);\n  }\n};\n","import { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router';\r\nimport {\r\n  addCommentsFailure,\r\n  addCommentsSuccess\r\n} from '../redux/actions/comments';\r\nimport { TIME_INTERVAL } from '../shared/constants';\r\nimport { getNewsItem } from '../shared/requests/item';\r\nimport { buildTree, getCommentsByIds } from '../shared/utils/comments';\r\n\r\nexport default () => {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const timerRef = useRef();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const { comments, isCommentsFailed } = useSelector(\r\n    (state) => state.newsItemReducer\r\n  );\r\n  const singleComment = comments[id];\r\n  const item = singleComment || [];\r\n\r\n  useEffect(() => {\r\n    if (singleComment) return;\r\n    loadCommentsPerMinute();\r\n\r\n    return () => clearTimeout(timerRef);\r\n  }, [singleComment]);\r\n\r\n  async function loadCommentsPerMinute() {\r\n    await requestComments();\r\n\r\n    timerRef.current = setTimeout(() => {\r\n      loadCommentsPerMinute();\r\n    }, TIME_INTERVAL);\r\n  }\r\n\r\n  const requestComments = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await getNewsItem(id);\r\n      if (!response.kids) return [];\r\n\r\n      try {\r\n        const commentList = await getCommentsByIds(response.kids);\r\n        const payload = { id, item: commentList };\r\n        dispatch(addCommentsSuccess(payload));\r\n      } catch {\r\n        dispatch(addCommentsFailure());\r\n      }\r\n    } catch {\r\n      dispatch(addCommentsFailure());\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRefreshComments = async () => {\r\n    clearTimeout(timerRef.current);\r\n    await loadCommentsPerMinute();\r\n  };\r\n\r\n  const commentsCount = item?.length;\r\n  const commentList = buildTree(item, id);\r\n  \r\n  return {\r\n    commentList,\r\n    loading,\r\n    isCommentsFailed,\r\n    commentsCount,\r\n    handleRefreshComments\r\n  };\r\n};\r\n","import React, { useState } from 'react';\nimport CommentList from './comment-list';\nimport { getNewsPostTime } from '../../shared/utils/time';\n\nconst CommentItem = ({ comment }) => {\n  const commentPostTime = getNewsPostTime(comment.time);\n\n  const [kidsShowed, setKidsShowed] = useState(false);\n  const toggleComments = () => {\n    setKidsShowed(!kidsShowed);\n  };\n\n  return (\n    <div className=\"comment\">\n      <div className=\"comment-author\">\n        <span className=\"name\">{comment.by}</span>\n        <span className=\"time\">{commentPostTime} ago</span>\n      </div>\n      <div\n        className=\"comment-text\"\n        dangerouslySetInnerHTML={{ __html: comment.text }}\n      ></div>\n      {comment.children?.length > 0 && (\n        <span\n          onClick={toggleComments}\n          className={\n            kidsShowed ? 'comment-toggle open' : 'comment-toggle close'\n          }\n        >\n          {kidsShowed ? `[-]` : `${comment.children?.length} replies collapsed`}\n        </span>\n      )}\n      {comment.children && kidsShowed && (\n        <CommentList commentList={comment.children} />\n      )}\n    </div>\n  );\n};\n\nexport default CommentItem;\n","import React from 'react';\nimport CommentItem from './comment-item';\n\nfunction CommentList({ commentList }) {\n  return (\n    <div className=\"comments-wrap\">\n      {commentList.map((comment) => {\n        return <CommentItem key={comment.id} comment={comment} />;\n      })}\n    </div>\n  );\n}\n\nexport default CommentList;\n","import React from 'react';\r\nimport useComments from '../../hooks/use-comments';\r\nimport Error from '../error/error';\r\nimport CommentList from './comment-list';\r\nimport ContentLoader from '../loader/content-loader';\r\nimport '../../scss/components/comments.sass';\r\n\r\nconst Comments = () => {\r\n  const {\r\n    commentList,\r\n    loading,\r\n    isCommentsFailed,\r\n    commentsCount,\r\n    handleRefreshComments\r\n  } = useComments();\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"comments-header\">\r\n        <div className=\"section\">\r\n          <div className=\"title\">\r\n            {commentsCount\r\n              ? `${commentsCount} Comments`\r\n              : `No comments yet`}\r\n          </div>\r\n          {loading && <ContentLoader />}\r\n        </div>\r\n        <div>\r\n          <button className=\"button\" onClick={handleRefreshComments}>\r\n            Refresh\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {isCommentsFailed ? (\r\n        <Error />\r\n      ) : (\r\n        <CommentList commentList={commentList} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import { LOAD_NEWS_ITEM_FAILURE, LOAD_NEWS_ITEM_SUCCESS } from './types';\n\nexport const addNewsItemSuccess = (item) => ({\n  type: LOAD_NEWS_ITEM_SUCCESS,\n  payload: item\n});\n\nexport const addNewsItemFailure = () => ({\n  type: LOAD_NEWS_ITEM_FAILURE\n});\n","import { createSelector } from 'reselect';\n\nconst selectNewsItemState = (state) => state.newsItemReducer;\nexport const newsItemSelector = createSelector(\n  [selectNewsItemState],\n  (newsItem) => newsItem\n);\n","import React from 'react';\nimport Error from '../error/error';\nimport Comments from '../comments/comments';\nimport useNewsItem from '../../hooks/use-news-item';\nimport ContentLoader from '../loader/content-loader';\nimport '../../scss/components/single-news.sass';\n\nconst SingleNewsItem = () => {\n  const { item, postTime, loading, isItemsFailed } = useNewsItem();\n\n  return (\n    <div>\n      {loading ? (\n        <ContentLoader />\n      ) : isItemsFailed ? (\n        <Error />\n      ) : (\n        <>\n          <div className=\"single-news\">\n            <div className=\"single-news__header\">\n              <div className=\"row\">\n                <a href={item?.url}>\n                  <h1 className=\"title\">{item?.title}</h1>\n                </a>\n              </div>\n              <div className=\"row\">\n                <div className=\"news-item__box-footer\">\n                  <ul className=\"news-meta\">\n                    <li>\n                      <i className=\"icon icon-rating\"></i>\n                      <span>{item?.score} points </span>\n                    </li>\n                    <li>\n                      <i className=\"icon icon-user\"></i>\n                      <span>{item?.by}</span>\n                    </li>\n                    <li>\n                      <i className=\"icon icon-time\"></i>\n                      <span>{postTime} ago</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div className=\"single-news__comments\">\n              <Comments />\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SingleNewsItem;\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\nimport {\n  addNewsItemSuccess,\n  addNewsItemFailure\n} from '../redux/actions/single-news';\nimport { newsItemSelector } from '../redux/selectors/news-item-selector';\nimport { getNewsItem } from '../shared/requests/item';\nimport { getNewsPostTime } from '../shared/utils/time';\n\nexport default () => {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n\n  const [loading, setLoading] = useState(true);\n  const { newsItems, isItemsFailed } = useSelector(newsItemSelector);\n  const singleItem = newsItems[id];\n  const { item } = singleItem || {};\n\n  useEffect(() => {\n    if (singleItem) return;\n    requestSignleNews();\n  }, [singleItem]);\n\n  const requestSignleNews = async () => {\n    try {\n      const item = await getNewsItem(id);\n      dispatch(addNewsItemSuccess(item));\n    } catch {\n      dispatch(addNewsItemFailure());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const postTime = getNewsPostTime(item?.time);\n\n  return { item, postTime, loading, isItemsFailed };\n};\n","import axios from 'axios';\nimport { baseURL } from '../constants';\n\nexport const getTopNews = async (newsLimit) => {\n  const result = await axios.get(`${baseURL}/topstories.json`);\n  const newsIds = result.data.slice(0, newsLimit) || [];\n  return newsIds;\n};\n","import { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport {\r\n  loadNewsFailure,\r\n  loadNewsStart,\r\n  loadNewsSuccess\r\n} from '../redux/actions/news';\r\nimport { NEWS_LIMIT, TIME_INTERVAL } from '../shared/constants';\r\nimport { getNewsItem } from '../shared/requests/item';\r\nimport { getTopNews } from '../shared/requests/news';\r\n\r\nconst useNews = () => {\r\n  const dispatch = useDispatch();\r\n  const timerRef = useRef();\r\n\r\n  useEffect(() => {\r\n    loadNewsPerMinute();\r\n\r\n    return () => clearTimeout(timerRef.current);\r\n  }, []);\r\n\r\n  async function loadNewsPerMinute() {\r\n    await requestNews();\r\n\r\n    timerRef.current = setTimeout(() => {\r\n      loadNewsPerMinute();\r\n    }, TIME_INTERVAL);\r\n\r\n  }\r\n\r\n  const requestNews = async () => {\r\n    try {\r\n      dispatch(loadNewsStart());\r\n\r\n      const topNewsIds = await getTopNews(NEWS_LIMIT);\r\n      const newsList = topNewsIds.map((item) => getNewsItem(item));\r\n\r\n      const topNewsList = await Promise.all(newsList);\r\n      dispatch(loadNewsSuccess(topNewsList));\r\n    } catch {\r\n      dispatch(loadNewsFailure());\r\n    }\r\n  };\r\n\r\n  const handleRefreshNews = async () => {\r\n    clearTimeout(timerRef.current);\r\n    await loadNewsPerMinute();\r\n  };\r\n\r\n  return handleRefreshNews;\r\n};\r\n\r\nexport default useNews;\r\n","import { LOAD_NEWS_FAILURE, LOAD_NEWS_START, LOAD_NEWS_SUCCESS } from './types';\n\nexport const loadNewsStart = () => ({\n  type: LOAD_NEWS_START\n});\n\nexport const loadNewsSuccess = (news) => ({\n  type: LOAD_NEWS_SUCCESS,\n  payload: news\n});\n\nexport const loadNewsFailure = () => ({\n  type: LOAD_NEWS_FAILURE\n});\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport Header from './components/header/header';\r\nimport ItemList from './components/item-list/item-list';\r\nimport Title from './components/title/title';\r\nimport SingleNewsItem from './components/single-news-item/single-news-item';\r\nimport useNews from './hooks/use-news';\r\nimport Error from './components/error/error';\r\nimport './scss/app.sass';\r\n\r\nconst App = () => {\r\n  const handleRefreshNews = useNews();\r\n\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <Header />\r\n      <div className=\"container\">\r\n        <Switch>\r\n          <Route path=\"/hacker-news-avito/\" exact>\r\n            <Title title=\"Top News\" handleRefreshNews={handleRefreshNews} />\r\n            <ItemList />\r\n          </Route>\r\n          <Route path=\"/item/:id\" component={SingleNewsItem} />\r\n          <Error />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  LOAD_NEWS_FAILURE,\n  LOAD_NEWS_START,\n  LOAD_NEWS_SUCCESS\n} from '../actions/types';\n\nconst initialState = {\n  news: {},\n  loading: false,\n  isFail: false\n};\n\nconst newsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_NEWS_START:\n      return {\n        ...state,\n        loading: true,\n        isFail: false\n      };\n    case LOAD_NEWS_SUCCESS: {\n      const itemsObject = {};\n      for (let i = 0; i < action.payload.length; i++) {\n        itemsObject[action.payload[i].id.toString()] = action.payload[i];\n      }\n      return {\n        loading: false,\n        isFail: false,\n        news: {\n          ...itemsObject\n        }\n      };\n    }\n\n    case LOAD_NEWS_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        isFail: true\n      };\n    default:\n      return state;\n  }\n};\n\nexport default newsReducer;\n","import {\n  LOAD_COMMENTS_SUCCESS,\n  LOAD_NEWS_ITEM_FAILURE,\n  LOAD_COMMENTS_FAILURE,\n  LOAD_NEWS_ITEM_SUCCESS\n} from '../actions/types';\n\nconst initialState = {\n  newsItems: {},\n  comments: {},\n\n  isItemsFailed: false,\n  isCommentsFailed: false\n};\n\nconst newsItemReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_NEWS_ITEM_SUCCESS:\n      return {\n        ...state,\n        isItemsFailed: false,\n        isCommentsFailed: false,\n        newsItems: {\n          ...state.newsItems,\n          [action.payload.id]: {\n            item: action.payload\n          }\n        }\n      };\n\n    case LOAD_NEWS_ITEM_FAILURE:\n      return {\n        ...state,\n        isItemsFailed: true\n      };\n\n    case LOAD_COMMENTS_SUCCESS:\n      return {\n        ...state,\n        isCommentsFailed: false,\n        comments: {\n          ...state.comments,\n          [action.payload.id]: action.payload.item\n        }\n      };\n\n    case LOAD_COMMENTS_FAILURE:\n      return {\n        ...state,\n        isCommentsFailed: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default newsItemReducer;\n","import { combineReducers } from 'redux';\nimport newsReducer from './news';\nimport newsItemReducer from './news-item';\n\nconst rootReducer = combineReducers({\n  newsReducer,\n  newsItemReducer\n});\n\nexport default rootReducer;\n","import { applyMiddleware, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers/root-reducer';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(thunk))\n);\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
(this["webpackJsonphacker-news-avito"]=this["webpackJsonphacker-news-avito"]||[]).push([[0],{42:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(19),s=n.n(r),a=n(2),i=n(12),o=(n(42),n.p+"static/media/logo.601fa4f1.png"),l=n(1),u=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"row header-row",children:[Object(l.jsx)("div",{className:"logo",children:Object(l.jsxs)(i.b,{to:"/hacker-news-avito/",className:"logo-link",children:[Object(l.jsx)("img",{src:o,alt:"Logo",className:"logo-img"}),Object(l.jsx)("span",{className:"logo-text",children:" Hacker News "})]})}),Object(l.jsx)("nav",{className:"menu"})]})})})};function j(e){var t=Date.now()/1e3-Number(e);return t<3600?d(~~(t/60)," minute"):t<86400?d(~~(t/3600)," hour"):d(~~(t/86400)," day")}function d(e,t){return 1===e?e+t:e+t+"s"}n(52);var b=function(e){var t=e.item,n=j(t.time);return Object(l.jsxs)("div",{className:"news-item",children:[Object(l.jsxs)("div",{className:"news-item__box-rating",children:[Object(l.jsx)("div",{className:"rating up",children:t.score}),Object(l.jsx)("span",{children:"Points"})]}),Object(l.jsxs)("div",{className:"news-item__box-content",children:[Object(l.jsx)("a",{href:"".concat(t.url),target:"_blank",rel:"noreferrer",children:Object(l.jsxs)("h2",{children:[" ",t.title," "]})}),Object(l.jsx)("div",{className:"news-item__box-footer",children:Object(l.jsxs)("ul",{children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("i",{className:"icon icon-user"}),Object(l.jsxs)("span",{children:[" ",t.by," "]})]}),Object(l.jsx)("li",{children:Object(l.jsxs)(i.b,{to:"/item/".concat(t.id),children:[Object(l.jsx)("i",{className:"icon icon-comment"}),Object(l.jsxs)("span",{children:[" ",t.descendants?"".concat(t.descendants," Comments"):"No comments yet"," "]})]})}),Object(l.jsxs)("li",{children:[Object(l.jsx)("i",{className:"icon icon-time"}),Object(l.jsxs)("span",{children:[" ",n," ago"]})]})]})})]}),Object(l.jsx)("div",{className:"news-item__box-action",children:Object(l.jsx)("a",{href:"".concat(t.url),target:"_blank",rel:"noreferrer",children:"Open link"})})]})},m=(n(53),function(){return Object(l.jsx)("div",{className:"error",children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("h1",{className:"error-title",children:[Object(l.jsx)("span",{children:"404"})," ",Object(l.jsx)("br",{})," Ooops! Page not found"]}),Object(l.jsx)("p",{className:"error-text",children:"This page does not exist or it is not unavailable"}),Object(l.jsx)(i.b,{to:"/",className:"error-link",children:"Go back to main page"})]})})}),O=n(11),h=n(21),f=Object(h.a)([function(e){return e.newsReducer}],(function(e){return e})),x=function(){var e=Object(O.c)(f),t=e.news,n=e.loading,c=e.isFail;return{newsArray:Object.values(t),loading:n,isFail:c}},p=n(36),v=n.n(p),w=(n(73),function(){return Object(l.jsx)("div",{className:"content-loader",children:Object(l.jsx)(v.a,{type:"Oval",color:"#ed702d",height:55,width:55})})}),N=function(){var e=x(),t=e.newsArray,n=e.loading,c=e.isFail;return Object(l.jsx)("div",{className:"item-list",children:n?Object(l.jsx)(w,{}):c?Object(l.jsx)(m,{}):t.map((function(e){return Object(l.jsx)(b,{item:e},e.id)}))})},g=(n(74),function(e){var t=e.title,n=e.handleRefreshNews;return Object(l.jsxs)("div",{className:"filter",children:[Object(l.jsx)("div",{className:"filter-label",children:Object(l.jsx)("h4",{children:t})}),Object(l.jsx)("div",{className:"filter-button",children:Object(l.jsx)("button",{className:"button",onClick:n,children:"Refresh"})})]})}),y=n(3),_=n.n(y),k=n(6),F=n(13),C="LOAD_NEWS_START",I="LOAD_NEWS_SUCCESS",S="LOAD_NEWS_FAILURE",E="LOAD_NEWS_ITEM_SUCCESS",L="LOAD_NEWS_ITEM_FAILURE",R="LOAD_COMMENTS_SUCCESS",T="LOAD_COMMENTS_FAILURE",A=function(e){return{type:R,payload:e}},D=function(){return{type:T}},M="https://hacker-news.firebaseio.com/v0",P=6e4,U=n(20),W=n.n(U),B=function(){var e=Object(k.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("".concat(M,"/item/").concat(t,".json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function e(t,n){var c;return{id:t.id.toString(),text:t.text,by:t.by,time:t.time,children:null===(c=t.kids)||void 0===c?void 0:c.map((function(t){return e(n[t],n)}))}},J=function(){var e=Object(k.a)(_.a.mark((function e(t){var n,c,r,s,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return B(e)})),e.next=3,Promise.all(n);case 3:return c=e.sent,e.next=6,Promise.all(c.map((function(e){return e})));case 6:if(r=e.sent,e.prev=7,s=[],r.forEach((function(e){s=s.concat((null===e||void 0===e?void 0:e.kids)||[])})),s.length){e.next=12;break}return e.abrupt("return",r);case 12:return e.next=14,J(s);case 14:return a=e.sent,e.abrupt("return",a.concat(r));case 18:e.prev=18,e.t0=e.catch(7),console.error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(a.f)().id,t=Object(O.b)(),n=Object(c.useRef)(),r=Object(c.useState)(!1),s=Object(F.a)(r,2),i=s[0],o=s[1],l=Object(O.c)((function(e){return e.newsItemReducer})),u=l.comments,j=l.isCommentsFailed,d=u[e],b=d||[];function m(){return h.apply(this,arguments)}function h(){return(h=Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n.current=setInterval((function(){f()}),P);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){if(!d)return m(),function(){return clearInterval(n)}}),[d]);var f=function(){var n=Object(k.a)(_.a.mark((function n(){var c,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),n.next=4,B(e);case 4:if((c=n.sent).kids){n.next=7;break}return n.abrupt("return",[]);case 7:return n.prev=7,n.next=10,J(c.kids);case 10:r=n.sent,t(A({id:e,item:r})),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),t(D());case 18:n.next=23;break;case 20:n.prev=20,n.t1=n.catch(0),t(D());case 23:return n.prev=23,o(!1),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[0,20,23,26],[7,15]])})));return function(){return n.apply(this,arguments)}}(),x=function(){var e=Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(n.current),e.next=3,m();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=null===b||void 0===b?void 0:b.length;return{commentList:function(e,t){var n={};return e.forEach((function(e){n[e.id]=e})),e.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.toString())===t})).map((function(e){return H(e,n)}))}(b,e),loading:i,isCommentsFailed:j,commentsCount:p,handleRefreshComments:x}},G=function(e){var t,n,r=e.comment,s=j(r.time),a=Object(c.useState)(!1),i=Object(F.a)(a,2),o=i[0],u=i[1];return Object(l.jsxs)("div",{className:"comment",children:[Object(l.jsxs)("div",{className:"comment-author",children:[Object(l.jsx)("span",{className:"name",children:r.by}),Object(l.jsxs)("span",{className:"time",children:[s," ago"]})]}),Object(l.jsx)("div",{className:"comment-text",dangerouslySetInnerHTML:{__html:r.text}}),(null===(t=r.children)||void 0===t?void 0:t.length)>0&&Object(l.jsx)("span",{onClick:function(){u(!o)},className:o?"comment-toggle open":"comment-toggle close",children:o?"[-]":"".concat(null===(n=r.children)||void 0===n?void 0:n.length," replies collapsed")}),r.children&&o&&Object(l.jsx)(V,{commentList:r.children})]})};var V=function(e){var t=e.commentList;return Object(l.jsx)("div",{className:"comments-wrap",children:t.map((function(e){return Object(l.jsx)(G,{comment:e},e.id)}))})},q=(n(94),function(){var e=X(),t=e.commentList,n=e.loading,c=e.isCommentsFailed,r=e.commentsCount,s=e.handleRefreshComments;return Object(l.jsx)("div",{children:n?Object(l.jsx)(w,{}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"comments-header",children:[Object(l.jsx)("div",{children:Object(l.jsx)("h2",{children:r?"".concat(r," Comments"):"No comments yet"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"button",onClick:s,children:"Refresh"})})]}),c?Object(l.jsx)(m,{}):Object(l.jsx)(V,{commentList:t})]})})}),z=function(e){return{type:E,payload:e}},K=Object(h.a)([function(e){return e.newsItemReducer}],(function(e){return e})),Q=(n(95),function(){var e=function(){var e=Object(a.f)().id,t=Object(O.b)(),n=Object(c.useState)(!0),r=Object(F.a)(n,2),s=r[0],i=r[1],o=Object(O.c)(K),l=o.newsItems,u=o.isItemsFailed,d=l[e],b=(d||{}).item;Object(c.useEffect)((function(){d||m()}),[d]);var m=function(){var n=Object(k.a)(_.a.mark((function n(){var c;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B(e);case 3:c=n.sent,t(z(c)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t({type:L});case 10:return n.prev=10,i(!1),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})));return function(){return n.apply(this,arguments)}}();return{item:b,postTime:j(null===b||void 0===b?void 0:b.time),loading:s,isItemsFailed:u}}(),t=e.item,n=e.postTime,r=e.loading,s=e.isItemsFailed;return Object(l.jsx)("div",{children:r?Object(l.jsx)(w,{}):s?Object(l.jsx)(m,{}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"single-news",children:[Object(l.jsxs)("div",{className:"single-news__header",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("a",{href:null===t||void 0===t?void 0:t.url,children:Object(l.jsx)("h1",{className:"title",children:null===t||void 0===t?void 0:t.title})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"news-item__box-footer",children:Object(l.jsxs)("ul",{className:"news-meta",children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("i",{className:"icon icon-rating"}),Object(l.jsxs)("span",{children:[null===t||void 0===t?void 0:t.score," points "]})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("i",{className:"icon icon-user"}),Object(l.jsx)("span",{children:null===t||void 0===t?void 0:t.by})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("i",{className:"icon icon-time"}),Object(l.jsxs)("span",{children:[n," ago"]})]})]})})})]}),Object(l.jsx)("div",{className:"single-news__comments",children:Object(l.jsx)(q,{})})]})})})}),Y=function(){var e=Object(k.a)(_.a.mark((function e(t){var n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("".concat(M,"/topstories.json"));case 2:return n=e.sent,c=n.data.slice(0,t)||[],e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(O.b)(),t=Object(c.useRef)();function n(){return r.apply(this,arguments)}function r(){return(r=Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t.current=setInterval((function(){s()}),P);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){return s(),n(),function(){return clearInterval(t.current)}}),[]);var s=function(){var t=Object(k.a)(_.a.mark((function t(){var n,c,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],e({type:C}),t.next=5,Y(20);case 5:return c=t.sent,n=c.map((function(e){return B(e)})),t.next=9,Promise.all(n);case 9:r=t.sent,e({type:I,payload:r}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),e({type:S});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return function(){var e=Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(t.current),e.next=3,n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},$=(n(96),function(){var e=Z();return Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)(u,{}),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(a.c,{children:[Object(l.jsxs)(a.a,{path:"/hacker-news-avito",exact:!0,children:[Object(l.jsx)(g,{title:"Top News",handleRefreshNews:e}),Object(l.jsx)(N,{})]}),Object(l.jsx)(a.a,{path:"/item/:id",component:Q}),Object(l.jsx)(m,{})]})})]})}),ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},te=n(14),ne=n(37),ce=n(5),re={news:{},loading:!1,isFail:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0,isFail:!1});case I:for(var n={},c=0;c<t.payload.length;c++)n[t.payload[c].id.toString()]=t.payload[c];return{loading:!1,isFail:!1,news:Object(ce.a)({},n)};case S:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!1,isFail:!0});default:return e}},ae=n(16),ie={newsItems:{},comments:{},isItemsFailed:!1,isCommentsFailed:!1},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(ce.a)(Object(ce.a)({},e),{},{isItemsFailed:!1,isCommentsFailed:!1,newsItems:Object(ce.a)(Object(ce.a)({},e.newsItems),{},Object(ae.a)({},t.payload.id,{item:t.payload}))});case L:return Object(ce.a)(Object(ce.a)({},e),{},{isItemsFailed:!0});case R:return Object(ce.a)(Object(ce.a)({},e),{},{isCommentsFailed:!1,comments:Object(ce.a)(Object(ce.a)({},e.comments),{},Object(ae.a)({},t.payload.id,t.payload.item))});case T:return Object(ce.a)(Object(ce.a)({},e),{},{isCommentsFailed:!0});default:return e}},le=Object(te.b)({newsReducer:se,newsItemReducer:oe}),ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.c,je=Object(te.d)(le,ue(Object(te.a)(ne.a)));s.a.render(Object(l.jsx)(i.a,{children:Object(l.jsx)(O.a,{store:je,children:Object(l.jsx)($,{})})}),document.getElementById("root")),ee()}},[[97,1,2]]]);
//# sourceMappingURL=main.72e90c13.chunk.js.map